(function(e){function t(t){for(var n,i,s=t[0],l=t[1],u=t[2],m=0,d=[];m<s.length;m++)i=s[m],o[i]&&d.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},o={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"3e9e":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf0"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i=a("2877"),s={},l=Object(i["a"])(s,o,r,!1,null,null,null),u=l.exports,c=a("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("el-form",{ref:"form",staticClass:"container",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:a("915e")}})])]),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{"prefix-icon":"myicon myicon-user",placeholder:"账户"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password","prefix-icon":"myicon myicon-key",placeholder:"密码"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginSubmit("form")}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:function(t){return e.loginSubmit("form")}}},[e._v("登录")])],1)],1)},d=[],p=a("795b"),f=a.n(p),g=a("7f43"),b=a.n(g),h="http://localhost:8888/api/private/v1/";b.a.defaults.baseURL=h,b.a.interceptors.request.use(function(e){var t=localStorage.getItem("mytoken");return t&&(e.headers["Authorization"]=t),e},function(e){return f.a.reject(e)});var v=function(e){return b.a.post("login",e).then(function(e){return e.data})},y=function(e){return b.a.get("users",e).then(function(e){return e.data})},w=function(e){return b.a.put("users/".concat(e.uid,"/state/").concat(e.type)).then(function(e){return e.data})},F=function(e){return b.a.post("users",e).then(function(e){return e.data})},k=function(e){return b.a.get("users/".concat(e)).then(function(e){return e.data})},_=function(e){return b.a.put("users/".concat(e.id),e).then(function(e){return e.data})},x=function(e){return b.a.delete("users/".concat(e)).then(function(e){return e.data})},C={name:"Login",data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{loginSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?v(t.form).then(function(e){200==e.meta.status?(localStorage.setItem("mytoken",e.data.token),t.$store.commit("setUsername",e.data.username),t.$router.push({name:"Home"})):t.$message({message:e.meta.msg,type:"error"})}):console.log("校验不通过")})}}},$=C,S=(a("da0f"),Object(i["a"])($,m,d,!1,null,"8014b0c6",null)),O=S.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("el-container",[a("el-aside",{attrs:{width:"auto"}},[a("div",{staticClass:"logo"}),a("el-menu",{staticClass:"el-menu-admin",attrs:{router:!0,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),a("span",[e._v("用户管理")])]),a("el-menu-item",{attrs:{index:"/user"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户列表")])])],2)],1)],1),a("el-container",[a("el-header",[a("i",{staticClass:"myicon myicon-menu toggle-btn",on:{click:e.toggleCollapse}}),a("div",{staticClass:"system-title"},[e._v("电商后台管理系统")]),a("div",[a("span",{staticClass:"welcome"},[e._v("您好,"+e._s(e.$store.getters.username))]),a("el-button",{attrs:{type:"text"},on:{click:e.logout}},[e._v("退出")])],1)]),a("el-main",[a("router-view")],1)],1)],1)],1)},j=[],L={data:function(){return{isCollapse:!1}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},toggleCollapse:function(){this.isCollapse=!this.isCollapse},logout:function(){localStorage.removeItem("mytoken"),this.$router.push({name:"Login"})}},mounted:function(){y({params:{query:"",pagenum:1,pagesize:3}}).then(function(e){})}},z=L,q=(a("b43e"),Object(i["a"])(z,D,j,!1,null,"419a34ba",null)),U=q.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("欢迎登录")])},E=[],I={},P=I,T=Object(i["a"])(P,V,E,!1,null,"12d3fab7",null),M=T.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[e._v("用户管理")])]),a("el-breadcrumb-item",[e._v("用户列表")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入内容"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initList(t)}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.initList},slot:"append"})],1),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.addDialogFormVisible=!0}}},[e._v("添加用户")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),a("el-table-column",{attrs:{label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{on:{change:function(a){return e.changeUserState(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",plain:"",type:"primary"},on:{click:function(a){return e.showEditDialog(t.row)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",plain:"",type:"danger"},on:{click:function(a){return e.showDeleteDialog(t.row)}}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-check",plain:"",type:"warning"}})]}}])})],1),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":[1,2,3,4],"page-size":1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addUserForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addUserSubmit("addUserForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑用户",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[a("el-form",{ref:"editUserForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUserSubmit("editUserForm")}}},[e._v("确 定")])],1)],1)],1)},H=[],J={data:function(){return{userList:[],query:"",total:0,pagesize:1,pagenum:1,addDialogFormVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},editForm:{username:"",email:"",mobile:"",id:0},editDialogFormVisible:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}],mobile:[{required:!0,message:"电话不能为空"}]}}},methods:{handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pagesize=e,this.initList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.pagenum=e,this.initList()},initList:function(){var e=this;y({params:{query:this.query,pagenum:this.pagenum,pagesize:this.pagesize}}).then(function(t){console.log(t),e.userList=t.data.users,e.total=t.data.total})},changeUserState:function(e){var t=this;console.log(e),w({uid:e.id,type:e.mg_state}).then(function(e){200===e.meta.status?t.$message({type:"success",message:"更改状态成功"}):t.$message({type:"warning",message:e.meta.msg})})},addUserSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&F(t.addForm).then(function(e){console.log(e),201===e.meta.status&&t.$message({type:"success",message:"创建用户成功"}),t.addDialogFormVisible=!1,t.initList()})})},showEditDialog:function(e){var t=this;console.log(e),k(e.id).then(function(e){t.editDialogFormVisible=!0,console.log(e),t.editForm.username=e.data.username,t.editForm.email=e.data.email,t.editForm.mobile=e.data.mobile,t.editForm.id=e.data.id})},editUserSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&_(t.editForm).then(function(e){console.log(e),200===e.meta.status&&t.$message({type:"success",message:"编辑用户信息提供"}),t.editDialogFormVisible=!1,t.initList()})})},showDeleteDialog:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){x(e.id).then(function(e){200===e.meta.status&&t.$message({type:"success",message:"删除成功!"}),t.initList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}},created:function(){this.initList()}},A=J,R=(a("f6f5"),Object(i["a"])(A,B,H,!1,null,"89295074",null)),W=R.exports;n["default"].use(c["a"]);var G=new c["a"]({routes:[{path:"/login",name:"Login",component:O},{path:"/",name:"Home",component:U,redirect:"/welcome",children:[{path:"welcome",name:"Welcome",component:M},{path:"user",name:"User",component:W}]}]}),K=a("2f62");n["default"].use(K["a"]);var N=new K["a"].Store({state:{username:""},mutations:{setUsername:function(e,t){e.username=t,localStorage.setItem("username",t)}},getters:{username:function(e){return localStorage.getItem("username")}},actions:{}}),Q=a("5c96"),X=a.n(Q);a("0fae"),a("a4b1");n["default"].prototype.axios=b.a,n["default"].use(X.a),G.beforeEach(function(e,t,a){var n=localStorage.getItem("mytoken");n?a():"/login"!=e.path?a({path:"/login"}):a()}),n["default"].config.productionTip=!1,new n["default"]({router:G,store:N,render:function(e){return e(u)}}).$mount("#app")},"915e":function(e,t,a){e.exports=a.p+"img/avatar.520d72ac.jpg"},"9eb2":function(e,t,a){},a4b1:function(e,t,a){},b43e:function(e,t,a){"use strict";var n=a("cadf"),o=a.n(n);o.a},cadf:function(e,t,a){},da0f:function(e,t,a){"use strict";var n=a("3e9e"),o=a.n(n);o.a},f6f5:function(e,t,a){"use strict";var n=a("9eb2"),o=a.n(n);o.a}});
//# sourceMappingURL=app.5ab50243.js.map